<!doctype html>
<html metal:use-macro="api.masterTemplate.macros['master']">
<head></head>
<body>

  <metal:main fill-slot="main">
<div ng-app="uLearnUsers">


    <h1 class="page-header">Registered Users</h1>

  		<oauthinfo username="${api.authenticated_user}" 
                 maxserver="${api.application_url}" 
                 oauthtoken="${api.authenticated_user_token}">
      </oauthinfo>

  		<ul class="nav nav-tabs">
  			<li role="presentation" class="active"><a data-toggle="tab" href="#manage">Manage</a></li>
  			<li role="presentation" ><a data-toggle="tab" href="#roles">Roles</a></li>
  		</ul>
      
      <div id="my-tab-content" class="tab-content">
        <div class="tab-pane fade in active" id="manage" ng-controller="UsersManageController as userMan"> 
          <br/>
  	     <table datatable="ng" dt-options="userMan.dtOptions" dt-column-defs="userMan.dtColumnDefs" class="compact table table-striped">
              <thead>
                <tr>
                  <th>UserName</th>
                  <th>DisplayName</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody>
                <tr ng-repeat="user in userMan.users">
                  <td>{{user.username}}</td>
                  <td>{{user.displayName}}</td>
                  <td>Accions</td>

                </tr>
              </tbody>
  	     </table>

          <hr>
          <div class="view-actions pull-right">
            <button class="btn btn-primary" ng-click="userMan.open()">New User</button>
          </div>


          <script type="text/ng-template" id="new-user.html">
              <div class="modal-header">
                  <h3 class="modal-title">Add new user</h3>
              </div>
              <div class="modal-body">

              <form>
                <div class="form-group">
                  <label for="userName">UserName</label>
                  <input ng-model="newuser.username" type="text" class="form-control" id="userName" placeholder="Enter Username">
                </div>

                <div class="form-group">
                  <label for="displayName">DisplayName</label>
                  <input ng-model="newuser.displayName" type="text" class="form-control" id="displayName" placeholder="Enter displayName">
                </div>

              </form>

              </div>
              <div class="modal-footer">
                  <button class="btn btn-primary" ng-click="ok()">OK</button>
                  <button class="btn btn-warning" ng-click="cancel()">Cancel</button>
              </div>
          </script>



        </div>

        <div class="tab-pane fade" id="roles" ng-controller="UsersRolesController as userRol"> 
          <br/>
         <table datatable="ng" dt-options="userRol.dtOptions" dt-column-defs="userRol.dtColumnDefs" class="compact table table-striped">
              <thead>
                <tr>
                  <th>UserName</th>
                  <th>Read</th>
                  <th>Write</th>
                  <th>Subscribe</th>
                  <th>Unsubscribe</th>
                  <th>Delete</th>
                </tr>
              </thead>
              <tbody>
                <tr ng-repeat="user in userRol.users">
                  <td>{{user.username}}</td>
                  <td>{{user.read}}</td>
                  <td>{{user.write}}</td>
                  <td>{{user.subscribe}}</td>
                  <td>{{user.unsubscribe}}</td>
                  <td>{{user.delete}}</td>

                </tr>
              </tbody>
         </table>
        </div>

      </div>
    </div>

  </metal:main>

<metal:main fill-slot="view_scripts">
    <script src="${api.application_url}/js/MAXClient.js"></script>
    <script src="${api.application_url}/js/users.js"></script>
</metal:main>


</body>
</html>

