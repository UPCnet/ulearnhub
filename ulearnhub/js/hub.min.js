/*! ulearnhub - v0.1.0 - 2015-06-19 */
!function(){"use strict";angular.module("hub",["datatables","datatables.bootstrap","ui.bootstrap","ui.router","ui.select","ngSanitize","ngCookies","pascalprecht.translate","formly","formlyBootstrap","hub.sidebar","hub.client","hub.translations"])}(),function(){"use strict";function a(a,b,c,d,e,f){a.setSections([{title:"Dashboard",sref:"domain",icon:"tachometer"},{title:"Deployments",sref:"deployments",icon:"server"},{title:"Domains",sref:"domains",icon:"globe"},{title:"Users",sref:"users",icon:"user"},{title:"Exceptions",sref:"exceptions",icon:"exclamation-triangle"}]),b.theme="bootstrap",c.otherwise("/"),d.useStaticFilesLoader({prefix:"locales/locale-",suffix:".json"}),d.preferredLanguage("ca"),e.state("domain",{url:"",templateUrl:"templates/hub.html",resolve:{}}).state("deployments",{url:"/deployments",templateUrl:"templates/deployments.html",controller:"DeploymentListController as deploymentsCtrl",resolve:{}}).state("deployment",{url:"/deployments/:name",templateUrl:"templates/deployment.html",controller:"DeploymentDetailController as deploymentCtrl",resolve:{components:["HUBClientService",function(a){return a.Component.query()}]}}).state("deployments.deployment.status",{url:"/:name/status",templateUrl:"templates/deployment-status.html",controller:"DeploymentStatusController as depStatusCtrl",resolve:{}}).state("domains",{url:"/domains",templateUrl:"templates/domains.html",controller:"DomainListController as domainsCtrl",resolve:{}}).state("users",{url:"/users",templateUrl:"templates/hubusers.html",controller:"HubUsersController as usersCtrl",resolve:{}}).state("exceptions",{url:"/exceptions",templateUrl:"templates/exceptions.html",controller:"ExceptionsController as excsCtrl",resolve:{}}).state("exception",{url:"/exceptions/:hash",templateUrl:"templates/exception.html",controller:"ExceptionController as excCtrl",resolve:{}})}angular.module("hub").config(a),a.$inject=["sidebarSectionsProvider","uiSelectConfig","$urlRouterProvider","$translateProvider","$stateProvider","formlyConfigProvider"]}(),function(){"use strict";function a(a,b){function c(){var b=a.toggle();e.sidebar_status=b?"":"page-sidebar-toggled"}function d(a){b.use(a)}var e=this;e.sidebar_status="",e.toggleSidebar=c,e.changeLanguage=d}angular.module("hub").controller("MainAppController",a),a.$inject=["sidebarSections","$translate"]}(),function(){"use strict";function a(a,b,c,d,e,f){return{key:b,type:"input",defaultValue:e,className:f,templateOptions:{type:a,label:c,placeholder:d}}}function b(b,c,d,e,f){return a("input",b,c,d,e,f)}function c(b,c,d,e,f){return a("password",b,c,d,e,f)}function d(a){return{template:'<hr /><div class="fieldgroup-title"><strong>'+a+"</strong></div>"}}function e(a,b,c){return{key:a,type:"checkbox",className:c,templateOptions:{label:b}}}function f(a,b,c,d){return{key:a,type:"select",className:d,templateOptions:{label:b,options:c}}}function g(a){return{className:"display-flex",fieldGroup:a}}var h=[{name:"SCOPE_SUBTREE",value:"SCOPE_SUBTREE"},{name:"SCOPE_ONELEVEL",value:"SCOPE_ONLEVEL"}];angular.module("hub").value("ComponentSchemas",{mongodbreplicamember:[g([b("name","Component Identifier","","mongocluster","flex-1"),b("title","Component Description","","","flex-1")]),d("Setup parameters:"),b("path","Setup path","","/var/mongodb",""),g([b("server","Server where is installed","","","flex-2"),b("host","Effective dns of member","","","flex-2"),b("port","port","","27001","flex-1")])],ldapserver:[g([b("name","Component Identifier","","mongocluster","flex-1"),b("title","Component Description","","","flex-1")]),d("Server parameters:"),g([b("server","LDAP server uri","ldaps://server:port","","flex-1"),e("readonly","Do not write to this server","flex-1")]),d("Security settings:"),g([b("admin_dn","LDAP bind dn","","","flex-1"),b("admin_password","LDAP bind password","","","flex-1")]),d("Search parameters:"),g([b("users_base_dn","Base DN where users live","","","flex-2"),f("user_scope","Scope to search",h,"flex-1")]),g([b("group_base_dn","Base DN where users live","","","flex-2"),f("group_scope","Scope to search",h,"flex-1")])],mongodbcluster:[g([b("name","Component Identifier","","mongocluster","flex-1"),b("title","Component Description","","","flex-1")]),b("replicaset","Replicaset name for this cluster","","","input-small"),d("Security settings:"),g([b("root_username",'Mongodb "root" user',"","root","flex-1"),c("root_password",'Mongodb "root" password',"password","","flex-1")]),g([b("db_username","Mongodb databases administrator user","","admin","flex-1"),c("db_password","Mongodb databases administrator password","password","","flex-1")]),b("admindb","Name of the database used for global authentication,\n leave blank to authenticate directly on working database.","","","input-small")]})}(),function(){"use strict";function a(a){function b(b){a.Exception.remove({hash:b.id},function(){c.exceptions=a.Exception.query()},function(){})}var c=this;c.exceptions=a.Exception.query(),c.remove=b}angular.module("hub").controller("ExceptionsController",a),a.$inject=["HUBClientService"]}(),function(){"use strict";function a(a,b){var c=this;c.hash=a.hash,c.exception=b.Exception.get({hash:c.hash}),c.request="",c.exception.$promise.then(function(a){c.request=Prism.highlight(a.request,Prism.languages.http),c.traceback=Prism.highlight(a.traceback,Prism.languages.python)})}angular.module("hub").controller("ExceptionController",a),a.$inject=["$stateParams","HUBClientService"]}(),function(){"use strict";function a(a,b,c,d,e){function f(a,b){b.active===!0?e.UserRole.update({role:b.role,domain:a.domain,username:a.username},{}):e.UserRole.remove({domain:a.domain,role:b.role,username:a.username})}function g(){e.User.save({username:h.newuser.username,domain:h.newuser.domain.name},function(){},function(){})}var h=this,i=a.currentLang;h.dtOptions=b.newOptions().withPaginationType("full_numbers").withBootstrap().withLanguage(c[i]),h.dtColumnDefs=[d.newColumnDef(0),d.newColumnDef(1),d.newColumnDef(2)],h.users=e.User.query(),h.domains=e.Domain.query(),h.newuser={},h.changeRole=f,h.add=g}angular.module("hub").controller("HubUsersController",a),a.$inject=["$cookies","DTOptionsBuilder","DTTranslations","DTColumnDefBuilder","HUBClientService"]}(),function(){"use strict";function a(a,b,c,d,e,f){var g=this,h=a.currentLang;g.dtOptions=c.newOptions().withPaginationType("full_numbers").withBootstrap().withLanguage(d[h]),g.dtColumnDefs=[e.newColumnDef(0),e.newColumnDef(1),e.newColumnDef(2)],g.domains=f.Domain.query(),g.openModal=function(a){var c=b.open({templateUrl:"new-domain.html",controller:"ModalInstanceCtrl",size:a});c.result.then(function(a){g.domains.push(a)})}}function b(a,b,c){a.alerts=[],a.ok=function(){c.Domain.save(a.newdomain).$promise.then(function(a){b.close(a)},function(b){a.alerts.push({type:"danger",msg:b.data.error+": "+b.data.error_description})})},a.cancel=function(){b.dismiss("cancel")},a.closeAlert=function(b){a.alerts.splice(b,1)}}angular.module("hub").controller("DomainListController",a).controller("NewDomainModalController",b),a.$inject=["$cookies","$modal","DTOptionsBuilder","DTTranslations","DTColumnDefBuilder","HUBClientService"],b.$inject=["$scope","$modalInstance","HUBClientService"]}(),function(){"use strict";function a(a,b,c,d,e,f){var g=this,h=a.currentLang;g.dtOptions=c.newOptions().withPaginationType("full_numbers").withBootstrap().withLanguage(d[h]),g.dtColumnDefs=[e.newColumnDef(0),e.newColumnDef(1),e.newColumnDef(2)],g.deployments=f.Deployment.query()}function b(a,b,c,d){a.alerts=[],a.ok=function(){d.Domain.save(a.newdomain).$promise.then(function(a){b.close(a)},function(b){a.alerts.push({type:"danger",msg:b.data.error+": "+b.data.error_description})})},a.cancel=function(){b.dismiss("cancel")},a.closeAlert=function(b){a.alerts.splice(b,1)}}angular.module("hub").controller("DeploymentListController",a).controller("NewDeploymentModalController",b),a.$inject=["$cookies","$modal","DTOptionsBuilder","DTTranslations","DTColumnDefBuilder","HUBClientService"],b.$inject=["$scope","$modalInstance","$modal","HUBClientService"]}(),function(){"use strict";function a(a,b,c,d,e,f,g,h,i){function j(a){return b("filter")(m.components,{type:a},!0)[0].components}function k(){var a=c.open({templateUrl:"templates/new-component.html",controller:"NewComponentCtrl as newCompCtrl",resolve:{component_type:function(){return m.selectedComponent},deployment_name:function(){return m.obj.name},parent_component:function(){return void 0}}});a.result.then(function(){m.obj=i.Deployment.get({name:d.name})},function(){})}function l(a,b){var e=c.open({templateUrl:"templates/new-component.html",controller:"NewComponentCtrl as newCompCtrl",resolve:{component_type:function(){return b},deployment_name:function(){return m.obj.name},parent_component:function(){return a}}});e.result.then(function(){m.obj=i.Deployment.get({name:d.name})},function(){})}var m=this;m.obj=i.Deployment.get({name:d.name}),m.selectedComponent={},m.components=e,m.selectedComponent=m.components[0],m.newComponentModal=k,m.newSubcomponentModal=l,m.availableSubcomponents=j}function b(a,b,c,d,e,f){function g(){var b=i.model.name,d=i.model.title;delete i.model.name,delete i.model.title;var g={component:i.component_type.type,name:b,title:d,params:i.model};f&&(g.parent=f.name),c.DeploymentComponent.save({name:e},g,function(b){a.close(b)},function(){})}function h(){a.dismiss("cancel")}var i=this;i.model={},i.component_type=d,i.formFields=b[d.type],i.onSubmit=g,i.onCancel=h}angular.module("hub").controller("DeploymentDetailController",a).controller("NewComponentCtrl",b),a.$inject=["$cookies","$filter","$modal","$stateParams","components","DTOptionsBuilder","DTTranslations","DTColumnDefBuilder","HUBClientService"],b.$inject=["$modalInstance","ComponentSchemas","HUBClientService","component_type","deployment_name","parent_component"]}(),function(){"use strict";function a(a){}angular.module("hub").controller("DeploymentStatusController",a),a.$inject=["HUBClientService"]}(),function(){"use strict";angular.module("hub.client",["ngResource"])}(),function(){"use strict";function a(a){var b={};return b.headers={"X-Oauth-Username":a.username,"X-Oauth-Token":a.token,"X-Oauth-Domain":a.domain,"X-Oauth-Scope":"widgetcli"},b.server=a.server,b}function b(){return{restrict:"E",controller:["$scope","$element","$attrs","hubSession",function(a,b,c,d){d.username=c.username,d.token=c.token,d.server=c.server,d.domain=c.domain}]}}angular.module("hub.client").directive("ngHubInfo",b).factory("hubInfo",a).value("hubSession",{username:"",token:"",server:""}),a.$inject=["hubSession"]}(),function(){"use strict";function a(a,b){this.Domain=a(b.server+"/api/domains/:id",null,{query:{method:"GET",isArray:!0,headers:b.headers},save:{method:"POST",headers:b.headers},get:{method:"GET",headers:b.headers}}),this.Component=a(b.server+"/api/components/:name",null,{query:{method:"GET",isArray:!0,headers:b.headers}}),this.Deployment=a(b.server+"/api/deployments/:name",null,{query:{method:"GET",isArray:!0,headers:b.headers},save:{method:"POST",headers:b.headers},get:{method:"GET",headers:b.headers}}),this.DeploymentComponent=a(b.server+"/api/deployments/:name/components",null,{save:{method:"POST",headers:b.headers}}),this.User=a(b.server+"/api/users/:username",null,{query:{method:"GET",isArray:!0,headers:b.headers},save:{method:"POST",headers:b.headers}}),this.UserRole=a(b.server+"/api/users/:domain/:username/roles/:role",null,{remove:{method:"DELETE",headers:b.headers},update:{method:"PUT",headers:b.headers}}),this.Exception=a(b.server+"/api/exceptions/:hash",null,{query:{method:"GET",isArray:!0,headers:b.headers},get:{method:"GET",headers:b.headers},remove:{method:"DELETE",headers:b.headers}})}angular.module("hub.client").service("HUBClientService",a),a.$inject=["$resource","hubInfo"]}(),function(){"use strict";angular.module("hub.sidebar",["ui.router"])}(),function(){"use strict";function a(){function a(a){c=a}function b(){function a(){return d=!d}function b(){return c}function f(a){c.push(a)}function g(a,b){var d=c.filter(function(b){return b.sref===a})[0];return c[c.indexOf(d)].subsections=b,d}function h(a,b){var c=e[b]===a;return c}function i(a,b,c){e[b]!==a|c===!0?e[b]=a:e[b]=void 0}var j={toggle:a,get:b,add:f,subsection:g,expanded:h,expand:i};return j}var c=[],d=!0,e={section:void 0,subsection:void 0};this.$get=b,this.setSections=a}angular.module("hub.sidebar").provider("sidebarSections",a)}(),function(){"use strict";function a(a,b,c){function d(c,d){var e;e=d?a.href(c):c;var f=a.href(a.current.name,b),g=new RegExp(e+"/","g"),h=f?null!==f.match(g):!1;h=h&&"#"!==e;var i=f===e,j=h|i;return j?"active":""}function e(a){var b=void 0===a?[]:a;return b.length>0?"has-sub":""}function f(a,b){return c.expanded(a,b)}function g(a,b){return c.expand(a,b)}var h=this;h.sections=c.get(),h.expands={section:void 0,subsection:void 0},h.active=d,h.has_sub=e,h.expanded=f,h.expand=g}angular.module("hub.sidebar").controller("SidebarController",a),a.$inject=["$state","$stateParams","sidebarSections"]}(),function(){"use strict";angular.module("hub.translations",[])}(),function(){"use strict";angular.module("hub.translations").constant("DTTranslations",{es:{sProcessing:"Procesando...",sLengthMenu:"Mostrar _MENU_ registros",sZeroRecords:"No se encontraron resultados",sEmptyTable:"Ningún dato disponible en esta tabla",sInfo:"Mostrando registros del _START_ al _END_ de un total de _TOTAL_ registros",sInfoEmpty:"Mostrando registros del 0 al 0 de un total de 0 registros",sInfoFiltered:"(filtrado de un total de _MAX_ registros)",sInfoPostFix:"",sSearch:"Buscar:",sUrl:"",sInfoThousands:".",sLoadingRecords:"Cargando...",oPaginate:{sFirst:"Primero",sLast:"Último",sNext:"Siguiente",sPrevious:"Anterior"},oAria:{sSortAscending:": Activar para ordenar la columna de manera ascendente",sSortDescending:": Activar para ordenar la columna de manera descendente"}},ca:{sProcessing:"Processant...",sLengthMenu:"Mostra _MENU_ registres",sZeroRecords:"No s'han trobat registres.",sEmptyTable:"No hi ha cap dada disponible en aquesta taula",sInfo:"Mostrant de _START_ a _END_ de _TOTAL_ registres",sInfoEmpty:"Mostrant de 0 a 0 de 0 registres",sInfoFiltered:"(filtrat de _MAX_ total registres)",sInfoPostFix:"",sSearch:"Filtrar:",sUrl:"",sInfoThousands:".",sLoadingRecords:"Carregant...",oPaginate:{sFirst:"Primer",sPrevious:"Anterior",sNext:"Següent",sLast:"Últim"},oAria:{sSortAscending:": Activa per ordenar la columna de manera ascendente",sSortDescending:": Activa per ordenar la columna de manera descendente"}},en:{sEmptyTable:"No data available in table",sInfo:"Showing _START_ to _END_ of _TOTAL_ entries",sInfoEmpty:"Showing 0 to 0 of 0 entries",sInfoFiltered:"(filtered from _MAX_ total entries)",sInfoPostFix:"",sInfoThousands:",",sLengthMenu:"Show _MENU_ entries",sLoadingRecords:"Loading...",sProcessing:"Processing...",sSearch:"Search:",sZeroRecords:"No matching records found",oPaginate:{sFirst:"First",sLast:"Last",sNext:"Next",sPrevious:"Previous"},oAria:{sSortAscending:": activate to sort column ascending",sSortDescending:": activate to sort column descending"}}})}();
//# sourceMappingURL=hub.min.js.map